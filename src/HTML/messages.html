<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DaBom - Messages</title>
    <link rel="stylesheet" href="messages.css">
    <link rel="stylesheet" href="../assets/main/main.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <div class="logo">
                    <h1>DaBom</h1>
                </div>
                <div class="nav-menu">
                    <a href="#" class="nav-item">í™ˆ</a>
                    <a href="#" class="nav-item">ì±„ë„</a>
                    <a href="#" class="nav-item">í”Œë ˆì´ë¦¬ìŠ¤íŠ¸</a>
                    <a href="#" class="nav-item">Together</a>
                </div>
            </div>

            <div class="nav-center">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="ë™ì˜ìƒ, ì±„ë„ ê²€ìƒ‰...">
                    <button class="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>

            <div class="nav-right">
                <button class="nav-btn">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="nav-btn">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </button>
                <button class="nav-btn active">
                    <i class="fas fa-envelope"></i>
                    <span class="notification-badge">5</span>
                </button>
                <div class="profile-container">
                    <img src="https://via.placeholder.com/35x35/ff4757/ffffff?text=U" alt="í”„ë¡œí•„" class="profile-img">
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <div class="messages-container">
            <!-- Chat List -->
            <div class="chat-list">
                <div class="chat-list-header">
                    <h2>ë©”ì‹œì§€</h2>
                    <button class="new-chat-btn">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>

                <div class="chat-search">
                    <div class="search-wrapper">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="chat-search-input" placeholder="ëŒ€í™” ê²€ìƒ‰...">
                    </div>
                </div>

                <div class="chat-list-content">
                    <div class="chat-item active" data-chat-id="1">
                        <div class="chat-avatar">
                            <img src="https://via.placeholder.com/50x50/2ed573/ffffff?text=A" alt="Alice">
                            <div class="online-status"></div>
                        </div>
                        <div class="chat-info">
                            <div class="chat-name">Alice Johnson</div>
                            <div class="chat-last-message">ì•ˆë…•í•˜ì„¸ìš”! ì–´ë–»ê²Œ ì§€ë‚´ì„¸ìš”?</div>
                        </div>
                        <div class="chat-meta">
                            <div class="chat-time">2ë¶„ ì „</div>
                            <div class="unread-count">3</div>
                        </div>
                    </div>

                    <div class="chat-item" data-chat-id="2">
                        <div class="chat-avatar">
                            <img src="https://via.placeholder.com/50x50/007bff/ffffff?text=B" alt="Bob">
                        </div>
                        <div class="chat-info">
                            <div class="chat-name">Bob Smith</div>
                            <div class="chat-last-message">í”„ë¡œì íŠ¸ ê´€ë ¨í•´ì„œ ì–˜ê¸°í•´ìš”</div>
                        </div>
                        <div class="chat-meta">
                            <div class="chat-time">1ì‹œê°„ ì „</div>
                        </div>
                    </div>

                    <div class="chat-item" data-chat-id="3">
                        <div class="chat-avatar">
                            <img src="https://via.placeholder.com/50x50/9c27b0/ffffff?text=C" alt="Carol">
                            <div class="online-status"></div>
                        </div>
                        <div class="chat-info">
                            <div class="chat-name">Carol Wilson</div>
                            <div class="chat-last-message">ì‚¬ì§„ ì •ë§ ë©‹ì ¸ìš”! ğŸ‘</div>
                        </div>
                        <div class="chat-meta">
                            <div class="chat-time">3ì‹œê°„ ì „</div>
                            <div class="unread-count">1</div>
                        </div>
                    </div>

                    <div class="chat-item" data-chat-id="4">
                        <div class="chat-avatar">
                            <img src="https://via.placeholder.com/50x50/ffa502/ffffff?text=D" alt="David">
                        </div>
                        <div class="chat-info">
                            <div class="chat-name">David Brown</div>
                            <div class="chat-last-message">ë„¤, ë‚´ì¼ ë´¬ìš”</div>
                        </div>
                        <div class="chat-meta">
                            <div class="chat-time">ì–´ì œ</div>
                        </div>
                    </div>

                    <div class="chat-item" data-chat-id="5">
                        <div class="chat-avatar">
                            <img src="https://via.placeholder.com/50x50/ff6b6b/ffffff?text=E" alt="Emma">
                        </div>
                        <div class="chat-info">
                            <div class="chat-name">Emma Davis</div>
                            <div class="chat-last-message">ê°ì‚¬í•©ë‹ˆë‹¤!</div>
                        </div>
                        <div class="chat-meta">
                            <div class="chat-time">2ì¼ ì „</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Window -->
            <div class="chat-window" id="chatWindow">
                <div class="chat-header">
                    <div class="chat-header-info">
                        <div class="chat-header-avatar">
                            <img src="https://via.placeholder.com/40x40/2ed573/ffffff?text=A" alt="Alice">
                            <div class="online-status"></div>
                        </div>
                        <div class="chat-header-details">
                            <h3 id="chatUserName">Alice Johnson</h3>
                            <div class="chat-header-status" id="chatUserStatus">ì˜¨ë¼ì¸</div>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button class="chat-action-btn">
                            <i class="fas fa-phone"></i>
                        </button>
                        <button class="chat-action-btn">
                            <i class="fas fa-video"></i>
                        </button>
                        <button class="chat-action-btn">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="message">
                        <div class="message-avatar">
                            <img src="https://via.placeholder.com/32x32/2ed573/ffffff?text=A" alt="Alice">
                        </div>
                        <div class="message-content-wrapper">
                            <div class="message-content">ì•ˆë…•í•˜ì„¸ìš”! ì–´ë–»ê²Œ ì§€ë‚´ì„¸ìš”?</div>
                            <div class="message-time">ì˜¤í›„ 2:30</div>
                        </div>
                    </div>

                    <div class="message sent">
                        <div class="message-content-wrapper">
                            <div class="message-content">ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ì˜ ì§€ë‚´ê³  ìˆì–´ìš”. ê°ì‚¬í•©ë‹ˆë‹¤!</div>
                            <div class="message-time">ì˜¤í›„ 2:32</div>
                        </div>
                        <div class="message-avatar">
                            <img src="https://via.placeholder.com/32x32/ff4757/ffffff?text=U" alt="You">
                        </div>
                    </div>

                    <div class="message">
                        <div class="message-avatar">
                            <img src="https://via.placeholder.com/32x32/2ed573/ffffff?text=A" alt="Alice">
                        </div>
                        <div class="message-content-wrapper">
                            <div class="message-content">ê·¸ë˜ì„œ ì¢‹ë„¤ìš”! ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì •ë§ ì¢‹ì•„ìš” â˜€ï¸</div>
                            <div class="message-time">ì˜¤í›„ 2:33</div>
                        </div>
                    </div>

                    <div class="message sent">
                        <div class="message-content-wrapper">
                            <div class="message-content">ë§ì•„ìš”! ì‚°ì±…í•˜ê¸° ì¢‹ì€ ë‚ ì”¨ë„¤ìš”</div>
                            <div class="message-time">ì˜¤í›„ 2:35</div>
                        </div>
                        <div class="message-avatar">
                            <img src="https://via.placeholder.com/32x32/ff4757/ffffff?text=U" alt="You">
                        </div>
                    </div>

                    <div class="typing-indicator" id="typingIndicator" style="display: none;">
                        <div class="message-avatar">
                            <img src="https://via.placeholder.com/32x32/2ed573/ffffff?text=A" alt="Alice">
                        </div>
                        <div class="typing-content">
                            <div class="typing-dots">
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="message-input-container">
                    <div class="message-input-wrapper">
                        <div class="input-actions">
                            <button class="input-btn">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="input-btn">
                                <i class="fas fa-image"></i>
                            </button>
                            <button class="input-btn">
                                <i class="fas fa-microphone"></i>
                            </button>
                        </div>
                        <div class="message-input-area">
                            <textarea class="message-input" placeholder="ë©”ì‹œì§€ ì…ë ¥..." rows="1"
                                id="messageInput"></textarea>
                            <button class="send-btn" id="sendBtn" disabled>
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì±„íŒ… ë°ì´í„°
        const chatData = {
            1: {
                name: "Alice Johnson",
                avatar: "https://via.placeholder.com/50x50/2ed573/ffffff?text=A",
                status: "ì˜¨ë¼ì¸",
                messages: [
                    { id: 1, sender: "Alice", content: "ì•ˆë…•í•˜ì„¸ìš”! ì–´ë–»ê²Œ ì§€ë‚´ì„¸ìš”?", time: "ì˜¤í›„ 2:30", sent: false },
                    { id: 2, sender: "You", content: "ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ì˜ ì§€ë‚´ê³  ìˆì–´ìš”. ê°ì‚¬í•©ë‹ˆë‹¤!", time: "ì˜¤í›„ 2:32", sent: true },
                    { id: 3, sender: "Alice", content: "ê·¸ë˜ì„œ ì¢‹ë„¤ìš”! ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì •ë§ ì¢‹ì•„ìš” â˜€ï¸", time: "ì˜¤í›„ 2:33", sent: false },
                    { id: 4, sender: "You", content: "ë§ì•„ìš”! ì‚°ì±…í•˜ê¸° ì¢‹ì€ ë‚ ì”¨ë„¤ìš”", time: "ì˜¤í›„ 2:35", sent: true }
                ]
            },
            2: {
                name: "Bob Smith",
                avatar: "https://via.placeholder.com/50x50/007bff/ffffff?text=B",
                status: "30ë¶„ ì „ ì ‘ì†",
                messages: [
                    { id: 1, sender: "Bob", content: "í”„ë¡œì íŠ¸ ê´€ë ¨í•´ì„œ ì–˜ê¸°í•´ìš”", time: "ì˜¤í›„ 1:00", sent: false },
                    { id: 2, sender: "You", content: "ë„¤, ì–´ë–¤ ë¶€ë¶„ì¸ê°€ìš”?", time: "ì˜¤í›„ 1:02", sent: true }
                ]
            },
            3: {
                name: "Carol Wilson",
                avatar: "https://via.placeholder.com/50x50/9c27b0/ffffff?text=C",
                status: "ì˜¨ë¼ì¸",
                messages: [
                    { id: 1, sender: "You", content: "ì–´ì œ ì°ì€ ì‚¬ì§„ì´ì—ìš”", time: "ì˜¤ì „ 11:00", sent: true },
                    { id: 2, sender: "Carol", content: "ì‚¬ì§„ ì •ë§ ë©‹ì ¸ìš”! ğŸ‘", time: "ì˜¤ì „ 11:30", sent: false }
                ]
            }
        };

        // DOM ìš”ì†Œë“¤
        const chatItems = document.querySelectorAll('.chat-item');
        const chatWindow = document.getElementById('chatWindow');
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const chatUserName = document.getElementById('chatUserName');
        const chatUserStatus = document.getElementById('chatUserStatus');
        const typingIndicator = document.getElementById('typingIndicator');

        let currentChatId = '1';
        let isTyping = false;

        // í˜„ì¬ ì‹œê°„ í˜•ì‹í™”
        function getCurrentTime() {
            const now = new Date();
            return now.toLocaleTimeString('ko-KR', {
                hour: 'numeric',
                minute: '2-digit',
                hour12: true
            });
        }

        // ë©”ì‹œì§€ ë Œë”ë§
        function renderMessages(chatId) {
            const chat = chatData[chatId];
            if (!chat) return;

            chatMessages.innerHTML = '';

            chat.messages.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${message.sent ? 'sent' : ''}`;

                const avatarSrc = message.sent ?
                    'https://via.placeholder.com/32x32/ff4757/ffffff?text=U' :
                    chat.avatar.replace('50x50', '32x32');

                if (message.sent) {
                    messageDiv.innerHTML = `
                        <div class="message-content-wrapper">
                            <div class="message-content">${message.content}</div>
                            <div class="message-time">${message.time}</div>
                        </div>
                        <div class="message-avatar">
                            <img src="${avatarSrc}" alt="${message.sender}">
                        </div>
                    `;
                } else {
                    messageDiv.innerHTML = `
                        <div class="message-avatar">
                            <img src="${avatarSrc}" alt="${message.sender}">
                        </div>
                        <div class="message-content-wrapper">
                            <div class="message-content">${message.content}</div>
                            <div class="message-time">${message.time}</div>
                        </div>
                    `;
                }
                chatMessages.appendChild(messageDiv);
            });

            // íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„°ëŠ” í•­ìƒ ë§¨ ì•„ë˜ì— ì¶”ê°€
            chatMessages.appendChild(typingIndicator);
            typingIndicator.style.display = "none";
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // ì±„íŒ… í—¤ë” ì •ë³´ ë Œë”ë§
        function renderChatHeader(chatId) {
            const chat = chatData[chatId];
            if (!chat) return;
            chatUserName.textContent = chat.name;
            chatUserStatus.textContent = chat.status;
            document.querySelector('.chat-header-avatar img').src = chat.avatar.replace('50x50', '40x40');
        }

        // ì±„íŒ… ì „í™˜
        chatItems.forEach(item => {
            item.addEventListener('click', function () {
                const selectedId = this.getAttribute('data-chat-id');
                if (selectedId === currentChatId) return;

                document.querySelector('.chat-item.active')?.classList.remove('active');
                this.classList.add('active');
                currentChatId = selectedId;
                renderChatHeader(currentChatId);
                renderMessages(currentChatId);
            });
        });

        // ë©”ì‹œì§€ ì…ë ¥ ì‹œ ë²„íŠ¼ í™œì„±í™”
        messageInput.addEventListener('input', function () {
            sendBtn.disabled = !this.value.trim();

            // ìë™ ë†’ì´ ì¡°ì ˆ
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // ë©”ì‹œì§€ ì „ì†¡
        sendBtn.addEventListener('click', sendMessage);
        messageInput.addEventListener('keydown', function (e) {
            if (e.key === 'Enter' && !e.shiftKey && !sendBtn.disabled) {
                e.preventDefault();
                sendMessage();
            }
        });

        function sendMessage() {
            const text = messageInput.value.trim();
            if (!text) return;
            const chat = chatData[currentChatId];
            if (!chat) return;

            const now = getCurrentTime();
            chat.messages.push({
                id: chat.messages.length + 1,
                sender: "You",
                content: text,
                time: now,
                sent: true
            });
            messageInput.value = '';
            messageInput.style.height = 'auto';
            sendBtn.disabled = true;
            renderMessages(currentChatId);
        }

        // ì´ˆê¸° ë Œë”ë§
        renderChatHeader(currentChatId);
        renderMessages(currentChatId);
    </script>
</body>

</html>